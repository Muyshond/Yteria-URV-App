{"version":3,"file":"View1-dbg.controller.js","names":["View1","Controller","extend","onInit","_onInit","getRoleCollections","_getRoleCollections","getToken","getTest","response","fetch","ok","Error","status","data","json","console","log","error","_getToken","sessionStorage","getItem","clientId","clientSecret","authHeader","btoa","URLSearchParams","append","method","headers","Authorization","body","result","access_token","setItem","_getTest"],"sources":["View1.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\n\n/**\n * @namespace project1.controller\n */\nexport default class View1 extends Controller {\n\n    /*eslint-disable @typescript-eslint/no-empty-function*/\n    public onInit(): void {\n\n    }\n\n    public async getRoleCollections(){\n        this.getToken();\n        this.getTest()\n        try {\n            const response = await fetch(\"/Ypto-URV-Application-srv-api/getRoleCollections\");\n            \n            if (!response.ok) {\n                throw new Error(`Error: ${response.status}`);\n            }\n            const data = await response.json();\n            console.log(data);\n            return data;\n        } catch (error) {\n            console.error(\"Error:\", error);\n        }\n    }\n\n\n    public async getToken() {\n\n        if (sessionStorage.getItem(\"access_token\")){\n            console.log(\"jwt found\")\n            return sessionStorage.getItem(\"access_token\");\n        }\n        const clientId = \"sb-ypto-urv-application!t396111\";\n        const clientSecret = \"290924ba-2bf3-4f26-9993-e127c7f8bac7$FAGnOcnTYsekIPnf-MfOVk_AhKU0LTd627D_M5wdXnc=\";\n        const authHeader = `Basic ${btoa(`${clientId}:${clientSecret}`)}`;\n        const data = new URLSearchParams();\n        data.append(\"grant_type\", \"client_credentials\");\n        try {\n            const response = await fetch(\n                \"https://64b4765dtrial.authentication.us10.hana.ondemand.com/oauth/token\",\n                {\n                    method: \"POST\",\n                    headers: {\n                        Authorization: authHeader,\n                        \"Content-Type\": \"application/x-www-form-urlencoded\"\n                    },\n                    body: data\n                }\n            );\n\n            if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n\n            const result = await response.json();\n            console.log(\"Access Token:\", result.access_token);\n            sessionStorage.setItem(\"access_token\", result.access_token);\n            return result.access_token;\n        } catch (error) {\n            console.error(\"Failed to get token:\", error);\n            return null;\n        }\n\n    }\n\n\n\n    public async getTest(){\n        \n        try {\n            const response = await fetch(\n                \"https://64b4765dtrial-dev-ypto-urv-application-srv.cfapps.us10-001.hana.ondemand.com/odata/v4/catalog/getIASUsers\",\n                {\n                    method: \"GET\",\n                    headers: {\n                        Authorization: `Bearer ${sessionStorage.access_token}`,\n                        \"Content-Type\": \"application/json\"\n                    }\n                }\n            );\n    \n            if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n    \n            const result = await response.json();\n            console.log(\"IAS Users:\", result);\n            return result;\n        } catch (error) {\n            console.error(\"Failed to fetch IAS users:\", error);\n            return null;\n        }\n    }\n}"],"mappings":"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","ignoreList":[]}