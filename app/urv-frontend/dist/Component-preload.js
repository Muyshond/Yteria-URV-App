//@ui5-bundle urvfrontend/Component-preload.js
sap.ui.require.preload({
	"urvfrontend/Component.js":function(){
"use strict";sap.ui.define(["sap/ui/core/UIComponent","./model/models"],function(e,t){"use strict";const n=t["createDeviceModel"];const i=e.extend("urvfrontend.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function t(){e.prototype.init.call(this);this.setModel(n(),"device");this.getRouter().initialize()}});return i});
},
	"urvfrontend/controller/App.controller.js":function(){
"use strict";sap.ui.define(["sap/ui/core/mvc/Controller"],function(n){"use strict";const t=n.extend("urvfrontend.controller.App",{onInit:function n(){}});return t});
},
	"urvfrontend/controller/Overview.controller.js":function(){
"use strict";sap.ui.define(["sap/m/MessageToast","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","../service/dataService","../service/exportService","sap/ui/core/BusyIndicator"],function(e,t,s,o,n,r){"use strict";function i(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const l=i(o);const a=i(n);const c=t.extend("urvfrontend.controller.Overview",{onInit:function e(){document.addEventListener("keydown",this.onKeyDown.bind(this));const t=this.getView();const o={tablegroups:{},tableusers:{},groupdetails:{},rolecollectiondetails:{},TreeModel:{},TreeModel2:{},userModel:{},groupModel:{},groupMembersModel:{}};Object.entries(o).forEach(e=>{let[o,n]=e;const r=new s(n);t?.setModel(r,o)})},onKeyDown:function e(t){if(t.key==="Enter"){this.getData()}},getData:function t(){const s=this.getUserInput();if(s.trim()===""){e.show("Please enter a valid ID");return}const o=this.getSearchmode();if(o==="group"){this.HandleGroupSearch(s)}else if(o==="user"){this.HandleUserSearch(s)}},showBusy:function e(){r.show(0)},hideBusy:function e(){r.hide()},getUserInput:function e(){const t=this.getView()?.byId("UserID");return t.getValue()},getSearchmode:function e(){const t=this.getView()?.byId("select");return t.getSelectedItem().mProperties.key},HandleGroupSearch:async function t(o){this.showBusy();try{const t=await l.getGroupByWord(o,this.getView());if(t===undefined){return e.show(`There went something wrong while trying to fetch the groups`)}else if(t.value.length===0){this.clearJsonModel("tablegroups");return e.show(`No groups found for "${o}"`)}else if(t.value.length===1){if(t.value[0]==="Group not found"){return e.show(`No groups found for "${o}"`)}else if(t.value[0].displayName===o){this.setGroup(o);return}else{const e=new s({value:t.value});this.getView()?.setModel(e,"tablegroups");return}}else if(t.value.length>1){t.value.forEach(e=>{if(e.displayName===o){this.setGroup(o);return}});const e=new s({value:t.value});this.getView()?.setModel(e,"tablegroups");return}}catch(t){e.show(`Error fetching groups: ${t}`)}finally{this.hideBusy()}},HandleUserSearch:async function t(o){this.showBusy();try{const t=await l.getUserByWord(o,this.getView());if(t===undefined){return e.show(`There went something wrong while trying to fetch the users`)}else if(t.value.length===0){this.clearJsonModel("tableusers");return e.show(`No users found for "${o}"`)}else if(t.value.length===1){if(t.value[0]==="User not found"){e.show("user not found");return}else if(t.value[0].id===o){this.setUser(o);return}else{const e=new s({value:t.value});this.getView()?.setModel(e,"tableusers")}}else if(t.value.length>1){t.value.forEach(e=>{if(e.id===o){return}});const e=new s({value:t.value});this.getView()?.setModel(e,"tableusers")}}catch(t){e.show(`Error fetching groups: ${t}`)}finally{this.hideBusy()}},clearJsonModel:function e(t){const o=new s({value:null});this.getView()?.setModel(o,t)},clearAllJsonModels:function e(){const t=this.getView();const s=["tablegroups","tableusers","groupdetails","rolecollectiondetails","TreeModel","TreeModel2","userModel","groupModel","groupMembersModel"];s.forEach(e=>{const s=t?.getModel(e);if(s){s.setData({})}})},onHandleSearchmodeChange:function t(){e.show("Search mode changed");this.clearAllJsonModels();const s=this.getSearchmode();if(s==="group"){}else if(s==="user"){}else{e.show("This searchmode is not supported")}},setUser:async function e(t){this.showBusy();try{const e=await l.getIASUser(t,this.getView());const o=e[0];this.setUserDetails(o);const n=await this.getUserCollectionsViaGroup(o);const r=Object.entries(n).map(e=>{let[t,s]=e;return{group:t,roleCollections:s}});const i={};for(const{group:e,roleCollections:t}of r){i[e]={};for(const s of t){const t=await l.getRolecollectionRoles(s,this.getView());const o=t?.value?.[0];const n=o?.roleReferences?.map(e=>e.name)||[];i[e][s]=n}const o=new s({value:i});this.getView()?.setModel(o,"groupdetails")}this.setRoleCollectionDataToTree(i);return}finally{this.hideBusy()}},setGroup:async function e(t){this.showBusy();try{const e=await l.getGroup(t,this.getView());const o=this.getView()?.byId("byUserId");const n=this.getView()?.byId("bygroup");this.setGroupDetails(e.value[0]);const r=e.value[0].members;if(r!==undefined){const e=new s({members:r});this.getView()?.setModel(e,"groupMembersModel")}const i={};const a=await l.getGroupRoles(e.value[0].displayName,this.getView());for(const e of a){const t=await l.getRolecollectionRoles(e,this.getView());const s=t?.value?.[0];const o=s?.roleReferences?.map(e=>e.name)||[];i[e]=o}const c=new s({value:i});this.getView()?.setModel(c,"rolecollectiondetails");this.setGroupDataToTree(i);return}finally{this.hideBusy()}},setRoleCollectionDataToTree:function e(t){const o=Object.entries(t).map(e=>{let[t,s]=e;return{name:t,icon:"sap-icon://group",children:Object.entries(s).map(e=>{let[t,s]=e;return{name:t,icon:"sap-icon://manager",children:(s||[]).map(e=>({name:e,icon:"sap-icon://role"}))}})}});this.getView()?.setModel(new s({tree:o}),"TreeModel")},setGroupDataToTree:function e(t){try{const e=Object.entries(t).map(e=>{let[t,s]=e;return{name:t,icon:"sap-icon://manager",children:s.map(e=>({name:e,icon:"sap-icon://role"}))}});this.getView()?.setModel(new s({tree:e}),"TreeModel")}catch(e){console.log(e)}},setUserDetails:function e(t){let o=this.getView()?.getModel("userModel");if(!o){o=new s;this.getView()?.setModel(o,"userModel")}o.setData(t)},setGroupDetails:function e(t){let o=this.getView()?.getModel("groupModel");if(!o){o=new s;this.getView()?.setModel(o,"groupModel")}o.setData(t)},getUserCollectionsViaGroup:async function e(t){const s=t.groups.map(e=>e.display);const o=await l.getRoleCollections(this.getView());const n=o?.value||[];const r={};s.forEach(e=>{r[e]=[]});n.forEach(e=>{if(!e.groupReferences&&!e.samlAttributeAssignment){return}const t=[...(e.groupReferences||[]).map(e=>e.attributeValue),...(e.samlAttributeAssignment||[]).map(e=>e.attributeValue)];s.forEach(s=>{if(t.includes(s)){r[s].push(e.name)}})});return r},onSearch:function e(t){const s=t.getParameter("newValue")?.toLowerCase()||"";const o=this.byId("RoleTree");o.expandToLevel(999);const n=o.getItems();if(!o)return;if(!s){n.forEach(e=>e.setHighlight("None"));return}n.forEach(e=>{const t=e.getBindingContext("TreeModel");if(t){const n=o.indexOfItem(e);const r=t.getProperty("name").toLowerCase();if(r.includes(s)){e.setHighlight("Success")}else{e.setHighlight("None")}}})},onGroupPress:function e(t){const s=t.getParameter("listItem");const o=s.getBindingContext("tablegroups");const n=o.getObject();const r=n.displayName;this.setGroup(r)},onUserPress:function e(t){const s=t.getParameter("listItem");const o=s.getBindingContext("tableusers");const n=o.getObject();const r=n.id;this.setUser(r)},onExportUser:function e(){const t=this.getView();a.onExportUser(t)},onExportGroup:function e(){const t=this.getView();a.onExportGroup(t)}});return c});
},
	"urvfrontend/i18n/i18n.properties":'# This is the resource bundle for urvfrontend\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=URV Application\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=URV Application',
	"urvfrontend/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"urvfrontend","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.16.4","toolsId":"3f30694e-b8bc-4a24-9d2c-75646fb2a5c2"},"dataSources":{"mainService":{"uri":"odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"intent1":{"semanticObject":"UrvFrontend","action":"display","title":"URV Frontend App","signature":{"parameters":{}},"resolutionResult":{"applicationType":"SAPUI5","additionalInformation":"SAPUI5.Component=urvfrontend","url":"/urvfrontend"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.133.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"urvfrontend.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"urvfrontend.view"},"routes":[{"name":"RouteOverview","pattern":":?query:","target":["TargetOverview"]}],"targets":{"TargetOverview":{"id":"Overview","name":"Overview"}}},"rootView":{"viewName":"urvfrontend.view.App","type":"XML","id":"App"}},"sap.cloud":{"public":true,"service":"urv-app"}}',
	"urvfrontend/model/models.js":function(){
"use strict";sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";function t(){const t=new e(n);t.setDefaultBindingMode("OneWay");return t}var i={__esModule:true};i.createDeviceModel=t;return i});
},
	"urvfrontend/service/dataService.js":function(){
"use strict";sap.ui.define([],function(){"use strict";class e{static async getGroup(e,t){try{const r=t?.byId("selectCIS");const o=r.getSelectedItem();console.log("hfqsdjklhfjkqslhdfjkqlshdfjklqsmhdfjkSDHJKQSL");const n=t?.getModel();const c=n.bindContext(`/getGroupByName(...)`,undefined,{});c.setParameter("GroupName",e);c.setParameter("btp",o.mProperties.key);const s=await c.execute().then(()=>{const e=c.getBoundContext();if(!e){return}const t=e.getObject();return t}).catch(e=>{console.error("Error fetching Group:",e)});return s}catch(e){console.error("Error:",e)}}static async getRolecollectionRoles(e,t){try{const r=t?.byId("selectCIS");const o=r.getSelectedItem();const n=t.getModel();const c=n.bindContext(`/getRoleCollectionRoles(...)`,undefined,{});c.setParameter("roleCollectionName",e);c.setParameter("btp",o.mProperties.key);const s=c.execute().then(()=>{const e=c.getBoundContext();if(!e){return}const t=e.getObject();return t}).catch(e=>{console.error("Error fetching role collecton roles:",e)});return s}catch(e){console.error("Error:",e)}}static async getRoleCollections(e){try{const t=e?.byId("selectCIS");const r=t.getSelectedItem();const o=e.getModel();const n=o.bindContext(`/getRoleCollections(...)`,undefined,{});n.setParameter("btp",r.mProperties.key);const c=n.execute().then(()=>{const e=n.getBoundContext();if(!e){return}const t=e.getObject();return t}).catch(e=>{console.error("Error fetching role collectons:",e)});return c}catch(e){console.error("Error:",e)}}static async getIASUser(e,t){try{const r=t?.byId("selectCIS");const o=r.getSelectedItem();const n=t.getModel();const c=n.bindContext(`/getIASUser(...)`,undefined,{});c.setParameter("id",e);c.setParameter("btp",o.mProperties.key);const s=c.execute().then(()=>{const e=c.getBoundContext();if(!e){return}const t=e.getObject();return t.value}).catch(e=>{console.error("Error fetching IAS User:",e)});return s}catch(e){console.error("Error :",e)}}static async getGroupByWord(e,t){try{const r=t?.byId("selectCIS");const o=r.getSelectedItem();const n=t.getModel();const c=n.bindContext(`/getGroupByWord(...)`,undefined,{});c.setParameter("GroupName",e);c.setParameter("btp",o.mProperties.key);const s=await c.execute().then(()=>{const e=c.getBoundContext();if(!e){return}const t=e.getObject();return t}).catch(e=>{console.error("Error fetching Group:",e)});return s}catch(e){console.error("Error catching groups:",e)}}static async getUserByWord(e,t){try{const r=t?.byId("selectCIS");const o=r.getSelectedItem();console.log(o.mProperties.key);const n=t.getModel();const c=n.bindContext(`/getUserByWord(...)`,undefined,{});c.setParameter("id",e);c.setParameter("btp",o.mProperties.key);const s=await c.execute().then(()=>{const e=c.getBoundContext();if(!e){return}const t=e.getObject();return t}).catch(e=>{console.error("Error fetching Group:",e)});return s}catch(e){console.error("Error catching groups:",e)}}static async getGroupRoles(t,r){const o=await e.getRoleCollections(r);const n=o?.value||[];const c=[];n.forEach(e=>{if(!e.groupReferences&&!e.samlAttributeAssignment){return}const r=[...(e.groupReferences||[]).map(e=>e.attributeValue),...(e.samlAttributeAssignment||[]).map(e=>e.attributeValue)];if(r.includes(t)){c.push(e.name)}});return c}}return e});
},
	"urvfrontend/service/exportService.js":function(){
"use strict";sap.ui.define(["sap/ui/export/Spreadsheet"],function(e){"use strict";class o{static onExportUser(o){const l=o.getModel("userModel");const r=l?.getData()||{};const t=o.getModel("groupdetails");const a=t?.getData()||{};const s=[];const p={"User ID":r.id||"","User Name":r.userName||"","Full Name":`${r.name?.givenName||""} ${r.name?.familyName||""}`,Email:r.emails?.[0]?.value||"","User Type":r.userType||"","User UUID":r.userUuid||"","Login Time":r.loginTime||"","Password Status":r.passwordStatus||"","Mail Verified":r.mailVerified||"","Source System":r.sourceSystem||""};Object.entries(a.value||{}).forEach(e=>{let[o,l]=e;if(typeof l==="object"&&l!==null&&Object.keys(l).length>0){Object.entries(l).forEach(e=>{let[l,r]=e;const t=Array.isArray(r)?r:[r];t.forEach(e=>{s.push({Group:o,"Role Collection":l,Role:e})})})}});s[0]={...s[0],...p};console.log(s[0]);const i=[{label:"User ID",property:"User ID"},{label:"User Name",property:"User Name"},{label:"Full Name",property:"Full Name"},{label:"Email",property:"Email"},{label:"User Type",property:"User Type"},{label:"User UUID",property:"User UUID"},{label:"Login Time",property:"Login Time"},{label:"Password Status",property:"Password Status"},{label:"Mail Verified",property:"Mail Verified"},{label:"Source System",property:"Source System"},{label:"Group",property:"Group"},{label:"Role Collection",property:"Role Collection"},{label:"Role",property:"Role"}];const c={workbook:{columns:i},dataSource:Array.isArray(s)&&s.length>0?s:[],fileName:`export.xlsx`};try{const o=new e(c);o.build().finally(()=>o.destroy())}catch(e){console.error("Export failed:",e)}}static onExportGroup(o){const l=o.getModel("groupModel");const r=l?.getData()||{};const t=o.getModel("groupMembersModel");const a=t?.getData()||{};const s=o.getModel("rolecollectiondetails");const p=s?.getData()||{};const i=p.value||[];const c=r.members||[];let n=[];const y=Math.max(c.length,Object.keys(i).length);for(let e=0;e<y;e++){n.push({id:e===0?r.id||"":"",GroupName:e===0?r.displayName||"":"",UserID:c[e]?.value||"","Display Name":c[e]?.display||"","Role Collection":Object.keys(i)[e]||"",Role:i[Object.keys(i)[e]]?.join(", ")||""})}const u=[{label:"Group ID",property:"id"},{label:"Group Name",property:"GroupName"},{label:"UserID",property:"UserID"},{label:"Display Name",property:"Display Name"},{label:"Role Collection",property:"Role Collection"},{label:"Role",property:"Role"}];const m={workbook:{columns:u},dataSource:n,fileName:`Groups_Export.xlsx`};try{const o=new e(m);o.build().finally(()=>o.destroy())}catch(e){console.error("Export failed:",e)}}}return o});
},
	"urvfrontend/view/App.view.xml":'<mvc:View controllerName="urvfrontend.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"urvfrontend/view/Overview.view.xml":'<mvc:View xmlns:smarttable="sap.ui.comp.smarttable" xmlns="sap.m"  controllerName="urvfrontend.controller.Overview"\n    xmlns:mvc="sap.ui.core.mvc"\n        xmlns:core="sap.ui.core"><Shell id="main"><VBox id="vbox"><SearchField\n            id="UserID"\n            placeholder="Search by ID"\n            liveChange="onLiveChange"\n            search="getData"/><Select id="select"  change=".onHandleSearchmodeChange"><items><core:ListItem id="user" key="user" text="Search by UserID" icon="sap-icon://person-placeholder"/><core:ListItem id="group" key="group" text="Search by group" icon="sap-icon://group"/></items></Select><Select id="selectCIS" ><items><core:ListItem id="dev" key="dev" text="dev" /><core:ListItem id="prod" key="prod" text="prod" /></items></Select><core:Fragment fragmentName="urvfrontend.view.fragments.UserTable" type="XML"/><core:Fragment fragmentName="urvfrontend.view.fragments.UserDetails" type="XML"/><core:Fragment fragmentName="urvfrontend.view.fragments.GroupTable" type="XML"/><core:Fragment fragmentName="urvfrontend.view.fragments.GroupDetails" type="XML"/><core:Fragment fragmentName="urvfrontend.view.fragments.RoleCollections" type="XML"/></VBox></Shell></mvc:View>\n\n',
	"urvfrontend/view/fragments/GroupDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Panel id="groupdetails" visible="{= !!${groupModel>/id} }"><headerToolbar><OverflowToolbar><Title text="User details" level="H2"/><ToolbarSpacer/><Button text="Export to Excel (Beta Version)" icon="sap-icon://excel-attachment" press="onExportGroup"/></OverflowToolbar></headerToolbar><content ><VBox class="sapUiSmallMargin" ><Text text="Display name: {groupModel>/displayName}" /><Text text="id: {groupModel>/id}" /></VBox></content><Table id="groupMembersTable" items="{groupMembersModel>/members}" headerText="Group members"><columns><Column><Text text="User ID"/></Column><Column><Text text="Display Name"/></Column></columns><items><ColumnListItem><cells><Text text="{groupMembersModel>value}"/><Text text="{groupMembersModel>display}"/></cells></ColumnListItem></items></Table></Panel></core:FragmentDefinition>',
	"urvfrontend/view/fragments/GroupTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Panel id="grouptable" headerText="Select a Group" visible="{= !!${tablegroups>/value} }"><VBox><Table id="groupsTable2" items="{tablegroups>/value}" \n               mode="SingleSelectMaster" \n               itemPress="onGroupPress"><columns><Column><Text text="Group Name" /></Column></columns><items><ColumnListItem type="Active"><cells><Text text="{tablegroups>displayName}" /></cells></ColumnListItem></items></Table></VBox></Panel></core:FragmentDefinition>',
	"urvfrontend/view/fragments/RoleCollections.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Panel id="rolecollections" headerText="RoleCollections" visible="{= !!${TreeModel>/tree} }"><SearchField \n            width="100%" \n            placeholder="Search in groups..." \n            liveChange=".onSearch" /><Tree id="RoleTree" items="{TreeModel>/tree}" mode="None"><StandardTreeItem title="{TreeModel>name}" icon="{TreeModel>icon}" /></Tree></Panel></core:FragmentDefinition>',
	"urvfrontend/view/fragments/UserDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Panel id="userdetails" visible="{= !!${userModel>/id} }" ><headerToolbar><OverflowToolbar><Title text="User details" level="H2"/><ToolbarSpacer/><Button text="Export to Excel (Beta Version)" icon="sap-icon://excel-attachment" press="onExportUser"/></OverflowToolbar></headerToolbar><content><VBox class="sapUiSmallMargin"><Text text="User ID: {userModel>/id}" /><Text text="Name: {userModel>/name/givenName} {userModel>/name/familyName}" /><Text text="Email: {userModel>/emails/0/value}" /><Text text="User Type: {userModel>/userType}" /><Text text="Status: {userModel>/userUuid}" /></VBox></content></Panel></core:FragmentDefinition>\n',
	"urvfrontend/view/fragments/UserTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Panel id="usertable" headerText="Select a user" visible="{= !!${tableusers>/value} }"><VBox><Table id="usersTable" items="{tableusers>/value}" mode="SingleSelectMaster" itemPress="onUserPress"><columns><Column><Text text="ID" /></Column><Column><Text text="First Name" /></Column><Column><Text text="Last Name" /></Column></columns><items><ColumnListItem type="Active"><cells><Text text="{tableusers>id}" /><Text text="{tableusers>name/givenName}" /><Text text="{tableusers>name/familyName}" /></cells></ColumnListItem></items></Table></VBox></Panel></core:FragmentDefinition>'
});
//# sourceMappingURL=Component-preload.js.map
